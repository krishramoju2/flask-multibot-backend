<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI MultiBot Interface</title>
  <style>
    body {
      font-family: monospace;
      background-color: #111;
      color: #eee;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    h1 {
      text-align: center;
    }
    select, input, button {
      padding: 10px;
      margin: 5px;
      font-size: 1em;
    }
    #chat-box {
      border: 1px solid #444;
      padding: 10px;
      margin-top: 10px;
      height: 300px;
      overflow-y: auto;
      background: #222;
    }
    .user { color: #6df; }
    .bot { color: #7f7; }
  </style>
</head>
<body>
  <h1>ðŸ¤– AI MultiBot Chat</h1>

  <label>Choose Bot:</label>
  <select id="bot-select">
    <option value="cybersecurity">Cybersecurity</option>
    <option value="space">Space Exploration</option>
    <option value="deepsea">Deep Sea</option>
    <option value="stocks">Stock Market</option>
  </select>

  <br/>

  <label>Your Message:</label>
  <input type="text" id="prompt" placeholder="Enter your prompt..." size="40">
  <button onclick="sendPrompt()">Send</button>

  <div id="chat-box"></div>

  <script>
    const sessionId = Math.random().toString(36).substring(2);

    async function sendPrompt() {
      const input = document.getElementById('prompt');
      const chatBox = document.getElementById('chat-box');
      const bot = document.getElementById('bot-select').value;
      const prompt = input.value.trim();

      if (!prompt) return;

      // Display user's message
      chatBox.innerHTML += `<div class="user"><strong>You:</strong> ${prompt}</div>`;

      const response = await fetch("/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          session_id: sessionId,
          message: prompt,
          language: "en",
          bot_name: bot
        })
      });

      const data = await response.json();
      const reply = data.reply || "(no reply)";

      chatBox.innerHTML += `<div class="bot"><strong>${bot} Bot:</strong> ${reply}</div>`;
      chatBox.scrollTop = chatBox.scrollHeight;

      input.value = "";
    }
  </script>
</body>
</html>
